<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requisiçoes sincronas e assincronas, promisses</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

</head>
<body class="bg-dark text-success">
    
    <div class="container-fluid">
        <div class="row d-flex justify-content-center">
            <div class="col-12 col-lg-3 rounded py-0 ">
                <label for="pesquisa" class="label-control mb-2 mt-2 mt-lg-5">Nome do País</label>
                <input type="text" name="pesquisa" id="pesquisa" class="form-control mb-2">
                <button class="btn btn-primary " onclick="pesquisar()">pesquisar</button>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row d-flex justify-content-center p-3">
            <div class="col-5">
                <h1 class="text-align-center">API REST COUNTRIES FOR FREE</h1>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row d-flex justify-content-center">
            <div class="col-8">
                <div class="row" id="exibir_bandeiras">
                    
                </div>
            </div>
        </div>
    </div>

    <script>
        
        function pesquisar() {
                    let = bandeiras = document.getElementById(`exibir_bandeiras`);
                    let country = document.getElementById('pesquisa').value;
                    let  URL = `https://restcountries.com/v3.1/name/${country}`;
            
                    fetch(URL)
                    .then(resp => resp.json())
                    .then(resp =>{

                        resp.forEach(pais => {
                            console.log(pais.name.common);
                            let flag = document.createElement('img');
                            flag.setAttribute(`src`, pais.flags.svg)

                            let nome = document.createElement('h3')
                            nome.innerText = pais.name.common

                            let ofc_name = document.createElement('h4')
                            ofc_name.innerText = pais.name.official

                            let card = document.createElement('div')
                            card.classList.add(`card`, `bg-black`);
                            card.style.backgroundColor = ``

                            let card_body = document.createElement('div')
                            card_body.classList.add(`card_body`)

                            let col = document.createElement('div')
                            col.classList.add('col-3')

                            let map = document.createElement('a')
                            map.setAttribute(`href`, pais.maps.openStreetMaps )
                            map.innerText = 'Mapa Open Street'

                            card.appendChild(flag);
                            card_body.appendChild(map)
                            card_body.appendChild(ofc_name)
                            card_body.appendChild(nome)
                            card.appendChild(card_body);
                            col.appendChild(card)
                            bandeiras.appendChild(col)

                            console.log(pais)
                        });


                    })
                    .catch(_ => {console.log(_)})   //captura um erro inesperado
                    .finally(()=> {console.log('requisicao finalizada');})
            
        }

        //postman hoppscotch
    </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>


</body>
</html>

